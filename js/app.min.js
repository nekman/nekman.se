/**
 * @license RequireJS text 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
  nekman.se - http://github.com/nekman/nekman.se
*/

define("views/mainView",["jquery","underscore","backbone"],function(e,t,n){var r={name:"@nekman",year:2013,texts:{loading:" Loading content... "}},i=n.View.extend({el:"#main",initialize:function(){this.$header=e("header"),this.$footer=e("<footer>").append(e("<span>").text(this.model.name+" - "+this.model.year)),this.$loading=e('<div id="loading">').append(e("<i>").addClass("icon-spinner icon-spin icon-4x")).append(this.model.texts.loading),this.$el.append(this.$loading)},render:function(){return this.$loading.hide(),this.$header.show(),this.$el.after(this.$footer),this}});return new i({model:r})}),define("lib/twitterEntities",["jquery"],function(e){var t=function(t){return e("<div/>").text(t).html()},n=function(n){if(!n.entities)return t(n.text);var r={},i=function(e,t){r[e.indices[0]]=[e.indices[1],t]};e.each(n.entities.urls,function(e,n){i(n,function(e){return"<a href='"+t(n.url)+"'>"+t(e)+"</a>"})}),e.each(n.entities.hashtags,function(e,n){i(n,function(e){return"<a href='http://twitter.com/search?q="+escape("#"+n.text)+"'>"+t(e)+"</a>"})}),e.each(n.entities.user_mentions,function(e,n){i(n,function(e){return"<a title='"+t(n.name)+"' href='http://twitter.com/"+t(n.screen_name)+"'>"+t(e)+"</a>"})});var s,o="",u=0,a=0;for(a=0,s=n.text.length;a<s;++a){var f=r[a];if(f){var l=f[0],c=f[1];a>u&&(o+=t(n.text.substring(u,a))),o+=c(n.text.substring(a,l)),a=l-1,u=l}}return a>u&&(o+=t(n.text.substring(u,a))),o};return{linkify:n}}),define("views/twitterView",["./../lib/twitterEntities","jquery","underscore","backbone"],function(e,t,n,r){return r.View.extend({el:"#tweets",render:function(){return this.$el.append(t("<div>").addClass("tweet").html(e.linkify(this.model))),this}})}),define("controllers/twitterController",["./../views/twitterView","jquery","underscore"],function(e,t,n){return{$el:t("<section>").attr({id:"tweets"}),promise:t.ajax({url:"http://api.twitter.com/1/statuses/user_timeline.json?screen_name=nekman&include_entities=true",dataType:"jsonp"}),render:function(){return this.$el.append(t("<h4>").text("Latest tweets")),t("#main").append(this.$el),this.promise.done(function(t){n.each(n.first(t,3),function(t){var n=new e({model:t});n.render()})}),this}}}),define("controllers/fontController",["webfont","jquery"],function(e,t){var n=new t.Deferred;return e.load({google:{families:["Cantarell","Droid+Serif","Lato:100:latin"]},active:function(){n.resolve()}}),{promise:n}}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.5",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);c.onXhr&&c.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!views/../../templates/stackExchange.html",[],function(){return'<div class="answer">\n	<b class="score <%= accepted ? "accepted" : "" %>">\n		<%= score %>\n	</b>\n	<a href="http://stackoverflow.com/questions/<%= question_id %>/#<%= answer_id %>">\n		<%= title %>\n	</a>\n</div>'}),define("views/stackExchangeView",["text!./../../templates/stackExchange.html","jquery","underscore","backbone"],function(e,t,n,r){var i=n.template(e);return r.View.extend({el:"#stackexchange",render:function(){return this.$el.append(i(this.model)),this}})}),define("models/stackExchangeCollection",["jquery","underscore","backbone"],function(e,t,n){return n.Collection.extend({initialize:function(e){if(!e.userId)throw"userId is required!";this.userId=e.userId,this.pageSize=e.pageSize||5},url:function(){return"http://api.stackoverflow.com/1.1/users/"+this.userId+"/answers?pagesize="+this.pageSize},sync:function(n,r,i){var s=t.extend({url:r.url(),dataType:"jsonp",jsonp:"jsonp"});return e.ajax(s,i)}})}),define("controllers/stackExchangeController",["./../views/stackExchangeView","./../models/stackExchangeCollection","jquery","underscore"],function(e,t,n,r){var i=function(){var e=new t({userId:"141363"});this.promise=e.fetch()};return i.prototype={$el:n("<section>").attr({id:"stackexchange"}),render:function(){return this.$el.append(n("<h4>").text("Latest answers on stackoverflow")),n("#main").append(this.$el),this.promise.done(function(t){r.each(r.first(t.answers,5),function(t){var n=new e({model:t});n.render()})}),this}},new i}),define("views/boxView",["jquery","underscore","backbone"],function(e,t,n){var r=t.template("icon-<%= name %> icon-4x"),i=function(e){return r({name:e.toLowerCase()})};return n.View.extend({tagName:"div",className:"box",events:{click:"click",tap:"click"},render:function(){var t=this.model.attributes;return this.$el.css({backgroundColor:t.color}).append(e("<h4>").text(t.name)).append(e("<div>").addClass(i(t.icon||t.name))),this},click:function(){location.href=this.model.get("url")}})}),define("models/boxCollection",["underscore","backbone"],function(e,t){var n=t.Collection.extend({url:"data/social.json"});return new n}),define("controllers/boxController",["./../views/boxView","./../models/boxCollection","jquery","underscore"],function(e,t,n,r){var i=function(){this.promise=t.fetch(),this.$el=n("<section>").attr({id:"social"})},s=function(t){var n=new e({model:t});this.$el.append(n.render().el)};return i.prototype={constructor:i,render:function(){var e=this;return this.promise.done(function(){t.forEach(n.proxy(s,e))}),this}},new i}),define("utils/applicationControllers",["./../controllers/twitterController","./../controllers/fontController","./../controllers/stackExchangeController","./../controllers/boxController","underscore"],function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;return{promises:t.map(n,function(e){return e.promise}),all:n,viewControllers:t.filter(n,function(e){return typeof e.render=="function"})}}),define("utils/resizeHandler",["jquery"],function(e){var t=960,n=e(window),r,i=function(){var e=n.width();if(e<t){r.removeClass("defaultwidth").addClass("minwidth");return}r.hasClass("defaultwidth")||r.addClass("defaultwidth").removeClass("minwidth")};return{watch:function(t){if(!(t instanceof e))throw"expected jQuery node";r=t.addClass("defaultwidth"),n.on("resize",i).trigger("resize")}}}),define("controllers/mainController",["./../views/mainView","./../utils/applicationControllers","./../utils/resizeHandler","jquery"],function(e,t,n,r){var i=function(){var t=e.$header.add(e.$el);n.watch(t)},s=function(){_.each(t.viewControllers,function(t){e.$el.append(t.render().$el)}),e.render()};return i.prototype={constructor:i,render:function(){return r.when(t.promises).done(s),this}},new i}),require.config({paths:{jquery:"https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min",underscore:"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.3/underscore-min",backbone:"https://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.9/backbone-min",webfont:"https://ajax.googleapis.com/ajax/libs/webfont/1/webfont"},shim:{backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},jquery:{exports:"jQuery"},webfont:{exports:"WebFont"}}}),require(["controllers/mainController"],function(e){e.render()}),define("app",function(){});